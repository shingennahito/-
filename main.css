/* =============================================================================
   0) Biến toàn cục (CSS Variables)
   Mục đích: định nghĩa màu sắc, kích thước, bóng đổ, bo góc… để mọi thành phần
   dùng chung. Thay đổi ở đây sẽ lan tỏa toàn site.
   - --header-h / --header-safe: chiều cao header và phần bù cho tai thỏ (safe-area)
   - --compare-* : các tham số cho bảng so sánh (cột cố định, số cột hiển thị…)
   - --content-max / --side-width: layout 2 cột cho desktop
   ----------------------------------------------------------------------------- */
:root{
  /* Màu & nền cơ bản */
  --card:#fff;                 /* Nền thẻ/card trắng */
  --ink:#1f2a44;               /* Màu chữ chính */
  --line:#e6ecf4;              /* Màu viền/đường phân chia */
  --muted:#6b7a99;             /* Chữ phụ */
  --bg:#f5f7fb;                /* Màu nền tổng thể */
  --accent:#4211be;            /* Màu nhấn (liên kết, nút ↑) */

  /* Gradient cho “chip”, hình tròn nhỏ nhấn */
  --chip-grad-1:#ff7edb;
  --chip-grad-2:#ff49ad;

  /* Kích thước header co giãn theo viewport (viewport = khung nhìn) */
  --h-max:64px;                /* Chiều cao tối đa */
  --h-min:48px;                /* Chiều cao tối thiểu */
  --header-h: clamp(var(--h-min), 9vw, var(--h-max));
  --header-safe: calc(var(--header-h) + env(safe-area-inset-top, 0px));

  /* Bóng đổ (shadow) cho header/card/hero */
  --shadow-card: 0 0px 4px rgba(17,20,45,.06);
  --shadow-header: 0 6px 24px rgba(0,0,0,.08);
  --shadow-hero: 0 16px 40px rgba(17,20,45,.16);

  /* Bo góc (border-radius) chuẩn toàn site */
  --radius-lg: 12px;

  /* Đệm phía trên trang (nếu cần bù khoảng trống) */
  --page-pad-top: 0px;

  /* Tham số bảng so sánh (compare) */
  --compare-fixed-col: 160px;  /* Rộng cột đầu “項目” */
  --compare-visible-cols: 5;   /* Số cột sản phẩm thấy ngay trên desktop */
  --compare-col-min: 150px;    /* Rộng tối thiểu mỗi cột sản phẩm */

  /* Layout desktop: cột nội dung + cột phải (side) */
  --content-max: 900px;        /* Max-width nội dung chính */
  --side-width: 220px;         /* Rộng cột bên phải */
}

/* =============================================================================
   1) Reset & cơ bản (Base)
   Mục đích: đặt lại hành vi mặc định trình duyệt + kiểu chữ/nền/link chung.
   - Lưu ý: không đổi selector, chỉ mô tả bằng tiếng Việt.
   ----------------------------------------------------------------------------- */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  background: var(--bg);
  color: var(--ink);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", Arial, sans-serif;
  margin:0;
}
a{ color: var(--accent); text-decoration:none; }
a:hover{ text-decoration:underline; }
a:focus-visible{ outline:3px solid #b5a6ff; outline-offset:2px; }

/* Khung căn giữa nội dung theo chiều ngang (dùng cho header/section) */
.wrap{ margin-inline:auto; max-width: 2000px; padding-inline:16px; }

/* Chặn hiện tượng “sập margin” (margin-collapsing) của phần tử đầu */
.content{ display: flow-root; }
.content > :first-child{ margin-block-start: 0; }

/* =============================================================================
   2) HEADER + NAV chính
   Khớp với <header class="site-header"> trong HTML.
   - Header dùng nền gradient, cố định (fixed) để luôn hiện khi cuộn.
   - Nav desktop hiển thị ngang; mobile có nút ☰ và backdrop.
   ----------------------------------------------------------------------------- */
.site-header{
  background: linear-gradient(90deg,#6d76ff,#9f5aff);
  box-shadow: var(--shadow-header);
  color:#fff;
  padding-top: env(safe-area-inset-top, 0);
  position: fixed; /* Ghi đè: luôn cố định trên cùng */
  top: 0; left: 0; right: 0;
  z-index: 1000;
}
.site-header .wrap{
  align-items:center;
  display:flex;
  gap:12px;
  justify-content:space-between;
  padding: 12px 16px;
  min-height: var(--header-h); /* Đảm bảo chiều cao tối thiểu */
}
.brand{ color:#fff; font-size:18px; font-weight:800; letter-spacing:.02em; }

/* Nav (desktop) */
.top-nav{ display:flex; gap:14px; }
.top-nav a{ color:#fff; font-weight:600; opacity:.92; text-decoration:none; }
.top-nav a:hover{ opacity:1; }

/* Điều khiển nav mobile (nút ☰, checkbox toggle, nền mờ) */
.menu-btn{ display:none; }
.nav-toggle{ display:none; }
.menu-backdrop{ display:none; }

/* Sau header cố định: đẩy nội dung xuống tránh bị che */
.site-header + .page{ margin-top: 0 !important; padding-top: var(--header-safe) !important; }

/* =============================================================================
   3) LAYOUT trang (grid chính)
   - Mặc định 1 cột (nội dung). Khi có .side-nav → 2 cột.
   - Giữa trang theo chiều ngang.
   ----------------------------------------------------------------------------- */
.page{
  align-items: start;
  display: grid;
  grid-template-columns: minmax(0, var(--content-max));
  justify-content: center;
  gap: 16px;
  padding-block: var(--page-pad-top) 20px;
}
.page:has(.side-nav){ grid-template-columns: minmax(0, var(--content-max)) var(--side-width); }
.content{ grid-column: 1; }
.side-nav{ grid-column: 2; }

/* =============================================================================
   4) THẺ/Card, SECTION, kiểu chữ chung
   - Dùng lại cho tất cả khu vực: ranking, compare, carousel…
   ----------------------------------------------------------------------------- */
.card{ background: var(--card); border: 1px solid var(--line); border-radius: var(--radius-lg); box-shadow: var(--shadow-card); padding:16px; }
.section h2{ font-size:24px; margin:0 0 12px; }

/* Văn dẫn (lead) + nhấn (highlight) */
.jp-lead{ color:#000000; line-height:2.5; margin: 0 0 3em; }
.hl{ background: linear-gradient(180deg, transparent 80%, #f3c6a2 0); font-weight:900; padding-bottom: .05em; }
.u-strong{ font-weight:800; text-decoration-color: #f3c6a2; text-decoration-line: underline; text-decoration-thickness: .18em; text-underline-offset: .18em; }

/* =============================================================================
   5) LEAD/HERO (ảnh đầu bài)
   - Giữ tỉ lệ 16:9, ảnh che phủ (object-fit: cover), badge tùy chọn.
   - Các anchor (#id) khi cuộn tới sẽ trừ độ cao header (scroll-margin-top).
   ----------------------------------------------------------------------------- */
.hero{ aspect-ratio: 16 / 9; box-shadow: var(--shadow-hero); overflow:hidden; position:relative; }
.hero.card{ border-radius: var(--radius-lg); overflow:hidden; padding:0; }
.hero.card img{ display:block; height:100%; object-fit: cover; width:100%; }
.hero-badge{ background:#5f169b; border-radius:999px; box-shadow:0 6px 16px rgba(0,0,0,.18); color:#fff; font-weight:700; padding:6px 10px; position:absolute; right:12px; top:12px; }
.section, .hero, .lead{ scroll-margin-top: calc(var(--header-h) + 8px); }

/* Khối văn dẫn căn đều hai bên cho tiếng Nhật */
.jp-lead-block{ text-align: justify; text-justify: inter-ideograph; --title-hang: 1em; --lead-right: 2em; }
.jp-lead-block h1.jp-lead{ padding-right: var(--title-hang); padding-left: var(--title-hang); text-indent: calc(-1.5 * var(--title-hang)); margin: 0 0 .8em; text-align: justify; text-indent:-1.5em; }
.jp-lead-block p.jp-lead{ padding-left: var(--title-hang); padding-right: var(--lead-right); margin: 0 0 1.5em; }
.jp-lead-block p.jp-lead:last-child{ margin-bottom: 0; }
@media (max-width:640px){ .jp-lead-block{ --lead-right: 2em; } }

/* =============================================================================
   6) TOC (Mục lục) – <nav id="toc" class="toc">
   - Khung phong cách “tem nhãn”. Mục đích giúp nhảy nhanh tới các section.
   ----------------------------------------------------------------------------- */
.toc{ background:#fff; border:10px solid #e0c176; border-radius:12px; box-shadow:0 8px 24px rgba(231,102,102,.05); margin-bottom: 4px; padding:26px 14px 14px; padding-top: 20px; position:relative; }
.toc h2{ background:linear-gradient(180deg,#b23a48 0%,#8d1023 100%); border:2px solid #e0c176; border-radius:999px; box-shadow:0 6px 16px rgba(0,0,0,.12); color:#fff; font-size:16px; font-weight:800; left:50%; letter-spacing:.06em; line-height:1.1; margin:0; padding:6px 18px; position:absolute; top:-20px; transform:translateX(-50%); }
.toc h2::before,.toc h2::after{ background:linear-gradient(180deg,#f8e7b4,#e0c176); border:1px solid #d6b35a; content:""; height:70%; position:absolute; top:50%; transform:translateY(-50%) skewX(28deg); width:16px; }
.toc h2::before{ border-right:none; left:-12px; }
.toc h2::after{ border-left:none; right:-12px; }
.toc ul{ display:grid; gap:10px; list-style:none; margin:10px 0 0; padding:0; }
.toc li{ background:#fff; border:1px solid #ead9b0; border-radius:6px; padding:10px 36px 10px 12px; position:relative; }
.toc li a{ color:#333; font-weight:600; text-decoration:none; }
.toc li a:hover{ color:#8d1023; text-decoration:underline; }
.toc li::after{ background:#c03248; border-radius:50%; box-shadow:0 4px 10px rgba(192,50,72,.35); color:#fff; content:"›"; display:grid; font-weight:900; height:22px; place-items:center; position:absolute; right:8px; top:50%; transform:translateY(-50%); width:22px; }

/* =============================================================================
   7) RANKING (lưới thẻ sản phẩm xếp hạng)
   - Lưới 5 cột desktop; hover nổi nhẹ; hiển thị huy chương, ảnh, tên, hãng, giá.
   ----------------------------------------------------------------------------- */
.rank-grid{ display:grid; gap:12px; grid-template-columns: repeat(5, minmax(0,1fr)); }
.rank-card{ background:#fff; border:1px solid var(--line); border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,.05); color:inherit; display:grid; gap:8px; overflow:hidden; padding:10px; text-align:center; text-decoration:none; transition: transform .18s ease, box-shadow .18s ease; }
.rank-card:hover,.rank-card:focus-visible{ box-shadow: 0 16px 40px rgba(17,20,45,.16); transform: translateY(-6px); }
.rank-card:active{ transform: translateY(-2px); }
.rank-card[aria-disabled="true"]{ cursor:default; pointer-events:none; }
.rank-card .medal{ color:#000; font-weight:800; }
.rank-card img{ aspect-ratio:1/1; border-radius:8px; object-fit:cover; width:100%; }
.rank-card .name{ color:#333; font-weight:700; }
.rank-card .brand{ color:var(--muted); font-size:12px; }
.rank-card .price{ color:#e23a3a; font-weight:800; }

/* =============================================================================
   8) BẢNG SO SÁNH (Compare)
   - Có thead sticky; cột đầu cố định trong .table-host; hiển thị 〇/× cho tính năng.
   ----------------------------------------------------------------------------- */
.compare-table{ border-collapse:collapse; min-width:700px; width:100%; }
.compare-table th,.compare-table td{ border:1px solid var(--line); padding:10px; text-align:left; vertical-align:top; }
.compare-table thead th{ background:#f8f8f8; position:sticky; top: var(--header-safe); z-index:1; }
.compare-table th:first-child{ width:160px; }
.col-head{ align-items:center; display:grid; gap:8px; grid-template-columns:64px 1fr; }
.col-head img{ border-radius:7px; height:50px; object-fit:cover; width:50px; }
.compare-table th,.compare-table td{ font-size:14px; line-height:1.6; }
.compare-table th{ color:#333; font-weight:700; }
.compare-table td{ color:#555; }
.compare-table tbody tr:nth-child(odd){ background:#fafafa; }

/* Dấu 〇/× cho tính năng (yes/no) */
.compare-table td.yes,.compare-table td.no{ font-size:20px; font-weight:900px; text-align:center; }
.compare-table td.yes::before{ color:#1a7f37; content:"〇"; }
.compare-table td.no::before{ color:#d83a3a; content:"X"; }

/* Đầu cột kiểu dọc (ảnh + tên) */
.compare-table .col-head.vertical{ align-items:center; display:flex; flex-direction:column; gap:6px; text-align:center; }
.compare-table .col-head.vertical img{ border-radius:6px; height:64px; object-fit:cover; width:64px; }

/* Link tên cột, giá */
.compare-table .col-name{ color:var(--ink); font-weight:700; line-height:1.3; text-decoration:none; }
.compare-table .col-name:hover{ color:var(--accent); text-decoration:underline; }
.compare-table .col-price{ color:#e23a3a; font-weight:800; margin-top:4px; }
.compare-table tbody th{ text-align:left; }
.compare-table tbody td{ text-align:center; }


/* =============================================================================
   9) LIST chi tiết (tuỳ chọn) – không bắt buộc có trong HTML
   - Dùng dạng thẻ ngang: ảnh trái, nội dung phải, tag, mô tả, thông số nhanh.
   ----------------------------------------------------------------------------- */
.detail-list{ display:grid; gap:16px; }
.detail-card{ background:#fff; border:1px solid var(--line); border-radius:12px; display:grid; gap:12px; grid-template-columns:200px 1fr; padding:12px; }
.detail-card img{ border-radius:8px; height:200px; object-fit:cover; width:200px; }
.detail-card h3{ font-size:18px; margin:0; }
.tags{ display:flex; flex-wrap:wrap; gap:8px; }
.tag{ background:#fde7cf; border-radius:8px; color:#333; font-size:12px; font-weight:700; padding:4px 8px; }

/* =============================================================================
   10) CAROUSEL chi tiết (#detailCarousel)
   - Bố cục 2 cột [sân khấu ảnh+info | cột CTA] trên desktop.
   - Ảnh có hiệu ứng xuất hiện (blur → rõ), mũi tên prev/next bám theo mép ảnh.
   - Dots (nút tròn) để chọn slide; tag/spec hiển thị bên dưới ảnh.
   ----------------------------------------------------------------------------- */
.dc-wrap{ display:grid; gap:10px; grid-template-columns: 1fr 220px; max-width: calc(var(--content-max) + var(--side-width) + 16px); margin:0 auto; padding:16px 0; position:relative; overflow:visible; }
.dc-stage{ display:grid; gap:12px; margin:0; padding:0; position:relative; }

/* Huy hiệu hạng (rank) – đưa ra ngoài ảnh (không overlay) */
.dc-rank{ align-self: start; background:#e23a3a; border-radius: 999px; box-shadow: 0 6px 16px rgba(0,0,0,.15); color:#fff; display: inline-block; font-weight:800; justify-self: start; margin: 2px 0 4px 6px; padding: 4px 8px; position: static !important; }

/* Ảnh chính có hiệu ứng mờ → rõ với transform nhẹ */
.dc-stage img{ aspect-ratio: 16 / 9; border:1px solid var(--line); border-radius:12px; box-shadow: var(--shadow-hero); display:block; height: 100%; object-fit:cover; opacity:1; transition: opacity .25s ease; width: 100%; }
#dcImg{ transition: opacity .6s ease, transform .7s cubic-bezier(.2,.65,.2,1), filter .7s ease; filter: blur(8px) saturate(.95); aspect-ratio: 1/1; border: 1px solid var(--line); border-radius: 12px; box-shadow: var(--shadow-hero); height: 600px; object-fit: cover; opacity: 0; transform: scale(1.04); width: 600px; }
#dcImg[style*="opacity: 1"]{ filter: blur(0) saturate(1); opacity: 1; transform: scale(1); }
.dc-stage{ position: relative; }
.dc-stage::after{ background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.34) 50%, transparent 65%); border-radius: 12px; content:""; inset:0; opacity: 0; pointer-events:none; position:absolute; transform: translateX(-120%); }
.dc-stage:has(#dcImg[style*="opacity: 1"])::after{ animation: dcShine .9s ease; }
@keyframes dcShine{ 0%{ transform: translateX(-120%); opacity: 0; } 15%{ opacity: .35; } 100%{ transform: translateX(120%); opacity: 0; } }

/* Tiêu đề + mô tả trong sân khấu */
.dc-info h3{ font-size:18px; margin:0 0 6px; }
.dc-intro{ color:#253253; margin:0 0 8px; }
.dc-name{ font-size: 18px; font-weight: 700; margin: 0 6px; }
.dc-intro{ color:#253253; line-height:1.7; margin: 4px 6px 0; }

/* Cột CTA (nút tới trang chính thức) */
.dc-side, .dc-meta{ align-content:start; display:grid; gap:10px; }
.dc-pricebox{ display:grid; gap:10px; justify-items: center; justify-self: center; }
.dc-btn, .btn-cta{ background:#1fb954; border:1px solid #1e7f34; border-radius:10px; box-shadow: 0 8px 18px rgba(31,185,84,.25); color:#fff; display:block; font-weight:800; padding:12px 10px; text-align:center; text-decoration:none; }
.dc-btn:hover, .btn-cta:hover{ filter: brightness(1.05); text-decoration:none; }

/* Nút mũi tên prev/next – JS sẽ tính vị trí bám theo ảnh */
.dc-nav{ background:#ffffffdd; border:1px solid #00000022; border-radius:50%; color:#333; cursor:pointer; display:grid; font-size:24px; font-weight:800; height:40px; place-items:center; position:absolute; top:50%; transform:translateY(-50%); width:40px; z-index:3; }
.dc-nav.prev{ left:auto; }
.dc-nav.next{ right:auto; }
#detailCarousel .dc-nav.next { display: none !important; }
#detailCarousel .dc-nav.prev { left: 8px; }

/* Dots chuyển slide */
.dc-dots{ display:flex; gap:8px; justify-content:center; margin-top:12px; }
.dc-dots button{ background:#d8dbe5; border:0; border-radius:50%; cursor:pointer; height:10px; width:10px; }
.dc-dots button[aria-selected="true"]{ background:#6d76ff; }

/* Đưa cụm CTA xuống dưới sân khấu và căn giữa (phù hợp ảnh minh họa) */
#detailCarousel .dc-meta{ grid-column: 1 / -1; justify-self: center; }
#detailCarousel .dc-pricebox{ margin-top: 12px !important; justify-items: center; }
#detailCarousel .dc-btn{ max-width: 220px; width: 100%; }

/* Mobile: 1 cột, tinh chỉnh mũi tên & khoảng cách CTA */
@media (max-width:900px){ .dc-wrap{ grid-template-columns: 1fr; } .dc-nav.next{ right:6px; } .dc-pricebox{ margin-top: 12px !important; } #dcImg{ width: 100%; max-width: 100%; height: auto; aspect-ratio: 1 / 1; } }

/* =============================================================================
   11) Bong bóng thoại (TALK) – note dưới carousel
   ----------------------------------------------------------------------------- */
.talk{ align-items:start; display:grid; gap:14px; grid-template-columns: 80px 1fr; margin-top:16px; }
.talk .speaker{ align-items:center; display:flex; flex-direction:column; gap:8px; }
.talk .avatar{ background:#fff; border:1px solid #e9e2d8; border-radius:50%; height:68px; object-fit:cover; width:68px; }
.talk .name{ color:#6d645c; font-size:12px; letter-spacing:.02em; }
.talk .balloon{ background:#fde7cf; border:1px solid #f3c6a2; border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.06); color:#333; line-height:1.7; padding:14px 16px; position:relative; }
.talk .balloon::before{ border:10px solid transparent; border-right-color:#f3c6a2; content:""; left:-12px; position:absolute; top:22px; }
.talk .balloon::after{ border:10px solid transparent; border-right-color:#fde7cf; content:""; left:-11px; position:absolute; top:22px; }

/* =============================================================================
   12) Nút lên đầu trang (Back-to-top)
   - Luôn nổi góc dưới phải, tránh đè nội dung bằng safe-area-bottom.
   ----------------------------------------------------------------------------- */
.backtotop{ background:var(--accent); border-radius:50%; bottom: calc(env(safe-area-inset-bottom, 0) + 18px); box-shadow:0 12px 28px rgba(3, 73, 6, 0.4); color:#ffffff; display:grid; height:44px; place-items:center; position:fixed; right:18px; width:44px; z-index:60; }

/* =============================================================================
   13) Footer quảng bá (Promo footer)
   - Khung tím cuối trang, chứa tiêu đề + mô tả + bản quyền. Link giữ màu trắng.
   ----------------------------------------------------------------------------- */
.promo-footer{ background: linear-gradient(90deg,#6d76ff,#9f5aff); border-radius: 10px; box-shadow: 0 10px 24px rgba(0,0,0,.12); color: #fff; margin-top: 24px; padding-bottom: 6px; }
.promo-footer__inner{ margin: 0 auto; max-width: var(--content-max); padding: 18px 16px; text-align: center; }
.promo-eyebrow{ font-size: 12px; margin: 0 0 6px; opacity: .9; }
.promo-title{ font-size: 20px; font-weight: 800; letter-spacing: .02em; margin: 0; }
.promo-copy{ font-size: 12px; margin: 6px 0 0; opacity: .9; }
.promo-footer a{ color:#fff; text-decoration: none; }
.promo-footer a:hover{ text-decoration: underline; }
@media (max-width:900px){ .promo-title{ font-size: 18px; } }

/* =============================================================================
   14) Vỏ bảng cuộn (.table-host) bao quanh bảng so sánh
   - Kích hoạt scroll ngang, cố định thead trong KHUNG (top:0), cố định cột đầu.
   ----------------------------------------------------------------------------- */
.table-host{ -webkit-overflow-scrolling: touch; margin-inline: auto; max-width: calc(var(--compare-fixed-col) + var(--compare-visible-cols) * var(--compare-col-min)); overflow-x: auto; overflow-y: hidden; position: relative; }
.table-host-inner{ width: max-content; }
.table-host .compare-table{ border-spacing: 0; border-collapse: separate; min-width: initial; width: max-content; }
.table-host .compare-table thead th{ z-index: 6; background: #fff; position: sticky; top: 0 !important; }
.table-host .compare-table thead th:first-child,
.table-host .compare-table tbody th{ background: #fff; left: 0; position: sticky; z-index: 7; }
.table-host .compare-table tbody tr:nth-child(odd) th{ background:#fafafa; }
.table-host .compare-table thead th:first-child{ width: var(--compare-fixed-col); }
.table-host .compare-table thead th:not(:first-child),
.table-host .compare-table tbody td{ min-width: var(--compare-col-min); }

/* =============================================================================
   15) Chặn khoảng trắng/đè chồng không mong muốn + Section header xanh đồng bộ
   - Gom các ghi đè (override) để chắc chắn UI khớp ảnh minh hoạ.
   ----------------------------------------------------------------------------- */
/* Không để page sinh khoảng trắng đầu; hero/section đầu không có margin-top */
.site-header + .page{ margin-top: 0 !important; padding-top: var(--header-safe) !important; }
.page > *:first-child{ margin-top: 0 !important; }
.hero, .hero.card{ margin-top: 0 !important; }

/* Dùng Grid & gap thay cho margin riêng lẻ của con */
.content{ display: grid; gap: 16px; }
.content > *{ margin: 0; }

/* Lặp lại hero để đảm bảo nhất quán (giữ nguyên style ban đầu) */
.hero{ aspect-ratio: 16 / 9; }
.hero.card{ overflow: hidden; padding: 0; }
.hero.card img{ display:block; height:100%; object-fit: cover; width:100%; }

/* Tiêu đề full-bleed (nền xanh) cho các section chính */
#howto> h2, #caution> h2, #summary > h2, :is(#ranking, #compare, #detailCarousel) > h2{
  padding: 14px 16px; background: linear-gradient(90deg,#2f62d9,#5b8cff); border-bottom: 1px solid #012ef5; border-radius: var(--radius-lg) var(--radius-lg) 0 0; color:#fff; display:block; font-weight:800; margin: -16px -16px 12px;
}
@media (max-width:640px){
  #howto.section.card > h2,
  #summary.section.card > h2,
  :is(#ranking, #compare, #detailCarousel).section.card > h2{ margin: -16px -16px 12px; }
}

/* #lead là card mẹ, ô con là card con (bo tròn + bóng đổ đồng bộ) */
#lead.card{ border: 1px solid var(--line) !important; background: var(--card) !important; border-radius: var(--radius-lg); box-shadow: var(--shadow-card); display: grid; gap: 20px; padding: 16px !important; }
#lead .section.card{ margin: 0; border: 1px solid var(--line); background: var(--card); border-radius: var(--radius-lg); box-shadow: var(--shadow-card); overflow: hidden; }
#howto > h2, #caution > h2{ border-radius: var(--radius-lg) var(--radius-lg) 0 0; }

/* =============================================================================
   16) Lưới/ảnh/iframe tự co; chống tràn ngang; ngắt từ dài
   - Bảo hiểm giao diện responsive.
   ----------------------------------------------------------------------------- */
:where(.page, .content, .card, .rank-grid, .dc-wrap, .dc-stage, .table-host, .compare-table, .toc, .promo-footer__inner):not(.avatar){ min-width: 0; }
:where(img, svg, video, iframe, html, body):not(.avatar){ max-width: 100%; height: auto; display: block; }
 h1, h2, h3, p, li, .col-name, .jp-lead, .tag{ overflow-wrap: anywhere; word-break: break-word; }

/* Bảng so sánh chiếm 100% chiều ngang trên mobile */
@media (max-width: 900px){ .table-host{ max-width: 100%; margin-inline: 0; } }

/* Lưới ranking co cột dần khi màn bé */
@media (max-width:1024px){ .rank-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); } }
@media (max-width:900px){ .rank-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width:480px){ .rank-grid{ grid-template-columns: 1fr; } }

/* Pad/cỡ chữ gọn hơn trên mobile */
@media (max-width:900px){ .site-header .wrap{ padding: 10px 12px; } .card{ padding: clamp(12px, 3.5vw, 16px); } .wrap{ padding-inline: clamp(12px, 5vw, 20px); } }
@media (max-width:640px){ .section h2{ font-size:20px; } .jp-lead{ line-height:1.8; } .detail-card{ grid-template-columns: 1fr; } .detail-card img{ height: auto; width: 100%; } .compare-table{ font-size:14px; min-width: 640px; } .compare-table th, .compare-table td{ padding: 8px; } .backtotop{ height:48px; width:48px; } }

/* Điều chỉnh min-width mỗi cột sản phẩm theo kích thước màn hình */
@media (max-width:900px){ :root{ --compare-col-min: 140px; } }
@media (max-width:640px){ :root{ --compare-col-min: 120px; } }

/* =============================================================================
   17) NAV mobile (hamburger) & Drawer
   - Khi <=900px: hiển thị nút ☰, menu trượt xuống; backdrop tối nền.
   ----------------------------------------------------------------------------- */
@media (max-width:900px){
  /* Bật layout 1 cột; ẩn side-nav nếu có */
  .page{ gap:12px; grid-template-columns: 1fr; justify-content: stretch; padding-block: 8px 16px; }
  .content{ grid-column: 1 / -1; }
  .side-nav{ display:none !important; }
  .hero.card img{ aspect-ratio: 16/9; object-fit: cover; }

  /* Nút hamburger */
  .menu-btn{ background:#ffffff22; border:1px solid #ffffff66; border-radius:12px; color:#fff; display:grid; font-size: clamp(16px, 6vw, 22px); height: clamp(36px,9vw,44px); place-items:center; width: clamp(36px,9vw,44px); z-index:1003; }

  /* Ngăn kéo (drawer) của nav */
  .top-nav{ background:#fff; box-shadow: 0 12px 28px rgba(0,0,0,.18); color:#1f2a44; display: grid; gap: 10px; left:0; opacity: 0; padding: 12px 16px; pointer-events: none; position: fixed; right:0; top: var(--header-safe); transform: translateY(-120%); z-index: 1002; }
  .top-nav a{ color:#1f2a44; font-weight:700; min-height:44px; padding: 12px 4px; }

  /* Nền mờ khi mở menu */
  .menu-backdrop{ background: rgba(0,0,0,.38); display:block; inset:0; opacity:0; pointer-events:none; position:fixed; transition: opacity .2s ease; z-index:1001; }

  /* Toggle checkbox: bật/tắt menu và backdrop */
  .nav-toggle:checked ~ .top-nav{ opacity: 1; pointer-events: auto; transform: translateY(0); }
  .nav-toggle:checked ~ .menu-backdrop{ opacity: 1; pointer-events: auto; }
}

/* =============================================================================
   18) Ghi chú từ vựng (EN→VI) cho dev
   - viewport: khung nhìn trình duyệt; sticky: dính theo cuộn; drawer: menu trượt.
   - safe-area-inset: vùng an toàn (tai thỏ iPhone); overflow: tràn nội dung.
   - aspect-ratio: tỉ lệ khung hình; object-fit: cách ảnh lấp đầy khung.
   ----------------------------------------------------------------------------- */
/* (Chỉ là chú thích, không có CSS thi hành) */
